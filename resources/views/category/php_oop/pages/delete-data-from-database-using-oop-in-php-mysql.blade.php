@extends('layouts.master')

@section('title')
    PHP-OOP | Delete Data from Database | Learn with Self
@endsection

@section('content')
    <div class="container-fluid">
        <div class="row">
            @include('category.php_oop.partials.Sideber')
            <div class="col-md-10">
                <div class="row">
                    <div class="col-md-8 border-left border-right">
                        <div class="main-heading">
                            <h1>How to delete data from database using oop in php mysql</h1>
                        </div>
                        <div class="description py-3">
                            <h3><b>How to delete data from database using oop in php mysql.</b></h3><p>In this post, you will be learning how to delete data from database by id using oop concept in php mysql.</p><p>We are using bootstrap v5 to design the html form/user interface.</p><p>Let's get started with delete data in php mysql using oops.</p><p><b>Step 1: </b>Add a <b>Delete button </b>in your fetched data from database <b>(eg: student-view.php) </b>as follows. </p><div class="alert funda-bg" style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">td</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">form</span> <span style="color: #9cdcfe;">action</span>=<span style="color: #ce9178;">"student-code.php"</span> <span style="color: #9cdcfe;">method</span>=<span style="color: #ce9178;">"POST"</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">button</span> <span style="color: #9cdcfe;">type</span>=<span style="color: #ce9178;">"submit"</span> <span style="color: #9cdcfe;">name</span>=<span style="color: #ce9178;">"deleteStudent"</span> <span style="color: #9cdcfe;">value</span>=<span style="color: #ce9178;">"</span><span style="color: #569cd6;">&lt;?=</span> <span style="color: #9cdcfe;">$row</span>[<span style="color: #ce9178;">'id'</span>] <span style="color: #569cd6;">?</span><span style="color: #569cd6;">&gt;</span><span style="color: #ce9178;">"</span> <span style="color: #9cdcfe;">class</span>=<span style="color: #ce9178;">"btn btn-danger"</span><span style="color: #808080;">&gt;</span>Delete<span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">button</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; <span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">form</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">td</span><span style="color: #808080;">&gt;</span></div></div><p><br></p><p><b>Step 2: </b>Create a <b>student-code.php</b> file and paste the below code:</p><div class="alert funda-bg" style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div><span style="color: #569cd6;">&lt;?php</span></div><div><span style="color: #c586c0;">include</span>(<span style="color: #ce9178;">'dbconn.php'</span>);</div><div><span style="color: #c586c0;">include_once</span>(<span style="color: #ce9178;">'StudentController.php'</span>);</div><br><div><span style="color: #c586c0;">if</span>(<span style="color: #dcdcaa;">isset</span>(<span style="color: #9cdcfe;">$_POST</span>[<span style="color: #ce9178;">'deleteStudent'</span>]))</div><div>{</div><div>&nbsp; &nbsp; <span style="color: #9cdcfe;">$id</span> = <span style="color: #dcdcaa;">mysqli_real_escape_string</span>(<span style="color: #9cdcfe;">$db</span>-&gt;<span style="color: #9cdcfe;">conn</span>, <span style="color: #9cdcfe;">$_POST</span>[<span style="color: #ce9178;">'deleteStudent'</span>]);</div><div>&nbsp; &nbsp; <span style="color: #9cdcfe;">$student</span> = <span style="color: #569cd6;">new</span> <span style="color: #4ec9b0;">StudentController</span>;</div><div>&nbsp; &nbsp; <span style="color: #9cdcfe;">$result</span> = <span style="color: #9cdcfe;">$student</span>-&gt;<span style="color: #dcdcaa;">delete</span>(<span style="color: #9cdcfe;">$id</span>);</div><div>&nbsp; &nbsp; <span style="color: rgb(197, 134, 192);">if</span>(<span style="color: rgb(156, 220, 254);">$result</span>)</div><div>    {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: rgb(156, 220, 254);">$_SESSION</span>[<span style="color: rgb(206, 145, 120);">'message'</span>] = <span style="color: rgb(206, 145, 120);">"Student Added Successfully"</span>;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: rgb(220, 220, 170);">header</span>(<span style="color: rgb(206, 145, 120);">"Location: </span><span style="color: rgb(206, 145, 120);">student-</span><span style="color: rgb(206, 145, 120);">view</span><span style="color: rgb(206, 145, 120);">.php"</span>);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: rgb(197, 134, 192);">exit</span>(<span style="color: rgb(181, 206, 168);">0</span>);</div><div>&nbsp; &nbsp; }</div><div><span style="color: rgb(197, 134, 192);">    else</span></div><div><span style="color: rgb(197, 134, 192);">    </span>{</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: rgb(156, 220, 254);">$_SESSION</span>[<span style="color: rgb(206, 145, 120);">'message'</span>] = <span style="color: rgb(206, 145, 120);">"Student Not Added"</span>;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: rgb(220, 220, 170);">header</span>(<span style="color: rgb(206, 145, 120);">"Location: </span><span style="color: rgb(206, 145, 120);">student-view</span><span style="color: rgb(206, 145, 120);">.php"</span>);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: rgb(197, 134, 192);">exit</span>(<span style="color: rgb(181, 206, 168);">0</span>);</div><div>&nbsp; &nbsp; }<br></div>}<br><div><span style="color: #569cd6;">?</span><span style="color: #569cd6;">&gt;</span></div></div><p><br></p><p><b>Step 3: </b>Create a <b>StudentController.php</b> file and paste the below code:</p><div class="alert funda-bg" style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div><span style="color: #569cd6;">&lt;?php</span></div><br><div><span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">StudentController</span></div><div>{</div><div>&nbsp; &nbsp; <span style="color: #569cd6;">public</span> <span style="color: #569cd6;">function</span> <span style="color: #dcdcaa;">__construct</span>()</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #9cdcfe;">$db</span> = <span style="color: #569cd6;">new</span> <span style="color: #4ec9b0;">DatabaseConnection</span>;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #569cd6;">$this</span>-&gt;<span style="color: #9cdcfe;">conn</span> = <span style="color: #9cdcfe;">$db</span>-&gt;<span style="color: #9cdcfe;">conn</span>;</div><div>&nbsp; &nbsp; }</div><br><div>&nbsp; &nbsp; <span style="color: #569cd6;">public</span> <span style="color: #569cd6;">function</span> <span style="color: #dcdcaa;">delete</span>(<span style="color: #9cdcfe;">$id</span>)</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #9cdcfe;">$student_id</span> = <span style="color: rgb(220, 220, 170);">mysqli_real_escape_string</span>(<span style="color: #569cd6;">$this</span>-&gt;<span style="color: #9cdcfe;">conn</span>,<span style="color: #9cdcfe;">$id</span>);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #9cdcfe;">$studentDeleteQuery</span> = <span style="color: #ce9178;">"</span><span style="color: #569cd6;">DELETE</span><span style="color: #ce9178;"> </span><span style="color: #569cd6;">FROM</span><span style="color: #ce9178;"> students </span><span style="color: #569cd6;">WHERE</span><span style="color: #ce9178;"> id</span>=<span style="color: #ce9178;">'</span><span style="color: #9cdcfe;">$student_id</span><span style="color: #ce9178;">' </span><span style="color: #569cd6;">LIMIT</span><span style="color: #ce9178;"> </span><span style="color: #b5cea8;">1</span><span style="color: #ce9178;">"</span>;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #9cdcfe;">$result</span> = <span style="color: #569cd6;">$this</span>-&gt;<span style="color: #9cdcfe;">conn</span>-&gt;<span style="color: #dcdcaa;">query</span>(<span style="color: #9cdcfe;">$studentDeleteQuery</span>);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #c586c0;">if</span>(<span style="color: #9cdcfe;">$result</span>){</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #c586c0;">return</span> <span style="color: #569cd6;">true</span>;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; }<span style="color: #c586c0;">else</span>{</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #c586c0;">return</span> <span style="color: #569cd6;">false</span>;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; }</div><div>}</div><div><span style="color: #569cd6;">?</span><span style="color: #569cd6;">&gt;</span></div></div><p><br></p>
                        </div>
                        <div class="col-md-12 mt-3">
                            <div class="row">
                                <div class="col-md-6 col-6 text-start">
                                    <a href="{{ url('php-oop/edit-and-update-data-using-oops-in-php-mysql') }}" class="bg-blue px-5 btn text-white" ><i class="fa fa-arrow-left me-2"></i> Prev </a>
                                </div>

                            </div>
                        </div>

                    </div>
                    @include('category.php_oop.partials.latestPost')
                </div>
            </div>
        </div>
    </div>
@endsection
