@extends("layouts.master")

@section('title')
PHP | Dynamic SQL | Learn with Self
@endsection

@section('content')
    <div class="container-fluid">
        <div class="row">
            @include('category.php.partials.phpSideber')
            <div class="col-md-10">
                <div class="row">
                    <div class="col-md-8 border-left border-right">
                        <div class="main-heading">
                            <h1>Create dynamic SQL insert query in php and mysql</h1>
                        </div>
                        <div class="description py-3">
                            <h2><b>How to create dynamic insert query in php mysql</b></h2><p></p><p>In this article, you will be learning about how to create a dynamic insert query in php mysqli.</p><p><b>Dynamic Insert Query in PHP MySQLi</b></p><div class="alert funda-bg" style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div><div style="line-height: 19px;"><div><span style="color: rgb(86, 156, 214);">function</span> <span style="color: rgb(220, 220, 170);">insertQuery</span>(<span style="color: rgb(156, 220, 254);">$table</span>, <span style="color: rgb(156, 220, 254);">$data</span>)<br></div></div></div><div>{</div><div>&nbsp; &nbsp; <span style="color: #9cdcfe;">$key</span> = <span style="color: #dcdcaa;">implode</span>(<span style="color: #ce9178;">','</span>, <span style="color: #dcdcaa;">array_keys</span>(<span style="color: #9cdcfe;">$data</span>));</div><div>&nbsp; &nbsp; <span style="color: #9cdcfe;">$value</span> = <span style="color: #ce9178;">"'"</span> . <span style="color: #dcdcaa;">implode</span>( <span style="color: #ce9178;">"','"</span>, <span style="color: #dcdcaa;">array_values</span>(<span style="color: #9cdcfe;">$data</span>)) .<span style="color: #ce9178;">"'"</span>;</div><br><div>&nbsp; &nbsp; <span style="color: #9cdcfe;">$sqlQuery</span> = <span style="color: #ce9178;">"</span><span style="color: #569cd6;">INSERT</span><span style="color: #ce9178;"> </span><span style="color: #569cd6;">INTO</span><span style="color: #ce9178;"> </span><span style="color: #9cdcfe;">$table</span><span style="color: #ce9178;"> (</span><span style="color: #9cdcfe;">$key</span><span style="color: #ce9178;">) </span><span style="color: #569cd6;">VALUES</span><span style="color: #ce9178;"> (</span><span style="color: #9cdcfe;">$value</span><span style="color: #ce9178;">)</span><span style="color: #ce9178;">"</span>;</div><div>}</div></div><p>So guys now, lets pass the <b>"table columns names"</b> and its <b>"data"</b>&nbsp;where we will create a Array variable named $data and lets give <b>key</b> and <b>value</b>. </p><p>So, this <b>"key"</b> will take it as mysql table <b>columns</b>&nbsp;and <b>"value"</b> will take as <b>data</b> to insert in that columns. lets see an example of it, given below:</p><div class="alert funda-bg" style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div><div style="line-height: 19px;"><div><span style="color: rgb(156, 220, 254);">$data</span> = [<br></div></div></div><div>&nbsp; &nbsp; <span style="color: #ce9178;">'fullname'</span> =&gt; <span style="color: #ce9178;">'Funda of Web IT'</span>,</div><div>&nbsp; &nbsp; <span style="color: #ce9178;">'email'</span> =&gt; <span style="color: #ce9178;">'fundaofwebit@gmail.com'</span>,</div><div>&nbsp; &nbsp; <span style="color: #ce9178;">'phone'</span> =&gt; <span style="color: #ce9178;">'888999XXXXX'</span>,</div><div>&nbsp; &nbsp; <span style="color: #ce9178;">'course'</span> =&gt; <span style="color: #ce9178;">'BCA'</span>,</div><div>];</div><div><br></div><div><div style="line-height: 19px;"><span style="color: #dcdcaa;">insertQuery</span>(<span style="color: #ce9178;">'students'</span>, <span style="color: #9cdcfe;">$data</span>);</div></div></div><p>&nbsp;&nbsp;</p><p><br></p><h5>Now, Lets take an Live example of students to insert the records into database by dynamic mysql insert query.</h5><p><b>Step 1:</b> Create a table named as students with below fields:</p><div class="funda-bg alert" style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div><span style="color: #569cd6;">CREATE</span> <span style="color: #569cd6;">TABLE</span> <span style="color: #569cd6;">IF</span> <span style="color: #569cd6;">NOT</span> <span style="color: #569cd6;">EXISTS</span> <span style="color: #ce9178;">`students`</span> (</div><div>&nbsp; &nbsp; <span style="color: #ce9178;">`id`</span> <span style="color: #569cd6;">int</span>(<span style="color: #b5cea8;">11</span>) <span style="color: #569cd6;">NOT</span> <span style="color: #569cd6;">NULL</span>,</div><div>&nbsp; &nbsp; <span style="color: #ce9178;">`fullname`</span> <span style="color: #569cd6;">varchar</span>(<span style="color: #b5cea8;">191</span>) <span style="color: #569cd6;">NOT</span> <span style="color: #569cd6;">NULL</span>,</div><div>&nbsp; &nbsp; <span style="color: #ce9178;">`email`</span> <span style="color: #569cd6;">varchar</span>(<span style="color: #b5cea8;">191</span>) <span style="color: #569cd6;">NOT</span> <span style="color: #569cd6;">NULL</span>,</div><div>&nbsp; &nbsp; <span style="color: #ce9178;">`phone`</span> <span style="color: #569cd6;">varchar</span>(<span style="color: #b5cea8;">20</span>) <span style="color: #569cd6;">NOT</span> <span style="color: #569cd6;">NULL</span>,</div><div>&nbsp; &nbsp; <span style="color: #ce9178;">`course`</span> <span style="color: #569cd6;">varchar</span>(<span style="color: #b5cea8;">20</span>) <span style="color: #569cd6;">NOT</span> <span style="color: #569cd6;">NULL</span>,</div><div>) ENGINE=InnoDB AUTO_INCREMENT=<span style="color: #b5cea8;">3</span> <span style="color: #569cd6;">DEFAULT</span> CHARSET=latin1;</div></div><p><br></p><p><b>Step 2:</b> Example for creating dynamic insert query with data in php and mysql as given below in code.php:</p><p><b>Example with MySQL Procedural.</b></p><div class="funda-bg alert" style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div><span style="color: #569cd6;">&lt;?php</span></div><br><div><span style="color: #9cdcfe;">$conn</span> = <span style="color: #dcdcaa;">mysqli_connect</span>(<span style="color: #ce9178;">'localhost'</span>,<span style="color: #ce9178;">'username'</span>,<span style="color: #ce9178;">'password'</span>,<span style="color: #ce9178;">'database_name'</span>);</div><br><div><span style="color: #569cd6;">function</span> <span style="color: #dcdcaa;">insertQuery</span>(<span style="color: #9cdcfe;">$table</span>, <span style="color: #9cdcfe;">$data</span>, <span style="color: #9cdcfe;">$conn</span>)</div><div>{</div><div>&nbsp; &nbsp; <span style="color: #9cdcfe;">$key</span> = <span style="color: #dcdcaa;">implode</span>(<span style="color: #ce9178;">','</span>, <span style="color: #dcdcaa;">array_keys</span>(<span style="color: #9cdcfe;">$data</span>));</div><div>&nbsp; &nbsp; <span style="color: #9cdcfe;">$value</span> = <span style="color: #ce9178;">"'"</span> . <span style="color: #dcdcaa;">implode</span>( <span style="color: #ce9178;">"','"</span>, <span style="color: #dcdcaa;">array_values</span>(<span style="color: #9cdcfe;">$data</span>)) .<span style="color: #ce9178;">"'"</span>;</div><br><div>&nbsp; &nbsp; <span style="color: #9cdcfe;">$sqlQuery</span> = <span style="color: #ce9178;">"</span><span style="color: #569cd6;">INSERT</span><span style="color: #ce9178;"> </span><span style="color: #569cd6;">INTO</span><span style="color: #ce9178;"> </span><span style="color: #9cdcfe;">$table</span><span style="color: #ce9178;"> (</span><span style="color: #9cdcfe;">$key</span><span style="color: #ce9178;">) </span><span style="color: #569cd6;">VALUES</span><span style="color: #ce9178;"> (</span><span style="color: #9cdcfe;">$value</span><span style="color: #ce9178;">)</span><span style="color: #ce9178;">"</span>;</div><div>&nbsp; &nbsp; <span style="color: #9cdcfe;">$result</span> = <span style="color: #dcdcaa;">mysqli_query</span>(<span style="color: #9cdcfe;">$conn</span>, <span style="color: #9cdcfe;">$sqlQuery</span>);</div><br><div>&nbsp; &nbsp; <span style="color: #c586c0;">if</span>(<span style="color: #9cdcfe;">$result</span>){</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #c586c0;">return</span> <span style="color: #569cd6;">true</span>;</div><div>&nbsp; &nbsp; }<span style="color: #c586c0;">else</span>{</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #c586c0;">return</span> <span style="color: #569cd6;">false</span>;</div><div>&nbsp; &nbsp; }</div><div>}</div><br><div><span style="color: #c586c0;">if</span>(<span style="color: #dcdcaa;">isset</span>(<span style="color: #9cdcfe;">$_POST</span>[<span style="color: #ce9178;">'save_student_btn'</span>]))</div><div>{</div><div>&nbsp; &nbsp; <span style="color: #9cdcfe;">$data</span> = [</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ce9178;">'fullname'</span> =&gt; <span style="color: #9cdcfe;">$_POST</span>[<span style="color: #ce9178;">'fullname'</span>],</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ce9178;">'email'</span> =&gt; <span style="color: #9cdcfe;">$_POST</span>[<span style="color: #ce9178;">'email'</span>],</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ce9178;">'phone'</span> =&gt; <span style="color: #9cdcfe;">$_POST</span>[<span style="color: #ce9178;">'phone'</span>],</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ce9178;">'course'</span> =&gt; <span style="color: #9cdcfe;">$_POST</span>[<span style="color: #ce9178;">'course'</span>],</div><div>&nbsp; &nbsp; ];</div><br><div>&nbsp; &nbsp; <span style="color: #9cdcfe;">$studentData</span> = <span style="color: #dcdcaa;">insertQuery</span>(<span style="color: #ce9178;">'students'</span>, <span style="color: #9cdcfe;">$data</span>, <span style="color: #9cdcfe;">$conn</span>);</div><div>&nbsp; &nbsp; <span style="color: #c586c0;">if</span>(<span style="color: #9cdcfe;">$studentData</span>){</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #dcdcaa;">echo</span> <span style="color: #ce9178;">"Inserted"</span>;</div><div>&nbsp; &nbsp; }<span style="color: #c586c0;">else</span>{</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #dcdcaa;">echo</span> <span style="color: #ce9178;">"something went wrong"</span>;</div><div>&nbsp; &nbsp; }</div><div>}</div><br><div><span style="color: #569cd6;">?</span><span style="color: #569cd6;">&gt;</span></div></div><p><br></p><p><b>Step 3:</b> Add the Student Form as given below in file student-add.php:</p><div class="alert funda-bg" style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span> <span style="color: #9cdcfe;">class</span>=<span style="color: #ce9178;">"container"</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span> <span style="color: #9cdcfe;">class</span>=<span style="color: #ce9178;">"row"</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span> <span style="color: #9cdcfe;">class</span>=<span style="color: #ce9178;">"col-md-6 mt-5"</span><span style="color: #808080;">&gt;</span></div><br><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">form</span> <span style="color: #9cdcfe;">action</span>=<span style="color: #ce9178;">"code.php"</span> <span style="color: #9cdcfe;">method</span>=<span style="color: #ce9178;">"POST"</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span> <span style="color: #9cdcfe;">class</span>=<span style="color: #ce9178;">"mb-3"</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">label</span> <span style="color: #9cdcfe;">for</span>=<span style="color: #ce9178;">""</span><span style="color: #808080;">&gt;</span>Full Name<span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">label</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">input</span> <span style="color: #9cdcfe;">type</span>=<span style="color: #ce9178;">"text"</span> <span style="color: #9cdcfe;">name</span>=<span style="color: #ce9178;">"fullname"</span> <span style="color: #9cdcfe;">required</span> <span style="color: #9cdcfe;">class</span>=<span style="color: #ce9178;">"form-control"</span> <span style="color: #808080;">/&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span> <span style="color: #9cdcfe;">class</span>=<span style="color: #ce9178;">"mb-3"</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">label</span> <span style="color: #9cdcfe;">for</span>=<span style="color: #ce9178;">""</span><span style="color: #808080;">&gt;</span>Email ID<span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">label</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">input</span> <span style="color: #9cdcfe;">type</span>=<span style="color: #ce9178;">"text"</span> <span style="color: #9cdcfe;">name</span>=<span style="color: #ce9178;">"email"</span> <span style="color: #9cdcfe;">required</span> <span style="color: #9cdcfe;">class</span>=<span style="color: #ce9178;">"form-control"</span> <span style="color: #808080;">/&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span> <span style="color: #9cdcfe;">class</span>=<span style="color: #ce9178;">"mb-3"</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">label</span> <span style="color: #9cdcfe;">for</span>=<span style="color: #ce9178;">""</span><span style="color: #808080;">&gt;</span>Course<span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">label</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">input</span> <span style="color: #9cdcfe;">type</span>=<span style="color: #ce9178;">"text"</span> <span style="color: #9cdcfe;">name</span>=<span style="color: #ce9178;">"course"</span> <span style="color: #9cdcfe;">required</span> <span style="color: #9cdcfe;">class</span>=<span style="color: #ce9178;">"form-control"</span> <span style="color: #808080;">/&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span> <span style="color: #9cdcfe;">class</span>=<span style="color: #ce9178;">"mb-3"</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">label</span> <span style="color: #9cdcfe;">for</span>=<span style="color: #ce9178;">""</span><span style="color: #808080;">&gt;</span>Phone No<span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">label</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">input</span> <span style="color: #9cdcfe;">type</span>=<span style="color: #ce9178;">"text"</span> <span style="color: #9cdcfe;">name</span>=<span style="color: #ce9178;">"phone"</span> <span style="color: #9cdcfe;">required</span> <span style="color: #9cdcfe;">class</span>=<span style="color: #ce9178;">"form-control"</span> <span style="color: #808080;">/&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span> <span style="color: #9cdcfe;">class</span>=<span style="color: #ce9178;">"mb-3"</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">button</span> <span style="color: #9cdcfe;">type</span>=<span style="color: #ce9178;">"submit"</span> <span style="color: #9cdcfe;">name</span>=<span style="color: #ce9178;">"</span><span style="color: rgb(206, 145, 120);">save_student_btn</span><span style="color: #ce9178;">"</span> <span style="color: #9cdcfe;">class</span>=<span style="color: #ce9178;">"btn btn-primary"</span><span style="color: #808080;">&gt;</span>Save Student<span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">button</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">form</span><span style="color: #808080;">&gt;</span></div><div><br></div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; <span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div></div><p><br></p>
                        </div>
                        <div class="col-md-12 mt-3">
                            <div class="row">
                                <div class="col-md-6 col-6 text-start">
                                    <a href="{{ url('php/export-mysql-data-to-excel-sheet-in-php') }}" class="bg-blue px-5 btn text-white" ><i class="fa fa-arrow-left me-2"></i> Prev </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    @include('category.php.partials.latestPost')
                </div>
            </div>
        </div>
    </div>
@endsection
