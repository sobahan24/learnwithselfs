@extends('layouts.master')

@section('title')
    Laravel 8 | Login with Phone or Email | Learn with Self
@endsection

@section('content')
    <div class="container-fluid">
        <div class="row">
            @include('category.laravel8.partials.sideber')
            <div class="col-md-10">
                <div class="row">
                    <div class="col-md-8 border-left border-right">
                        <div class="main-heading">
                            <h1>Login with email or phone number in Laravel</h1>
                        </div>
                        <div class="description py-3">
                            <h3>How to Login with email or phone number in Laravel</h3><p>In this post, you will be learning how to login with email id or phone/<span style="background-color: transparent; text-align: var(--bs-body-text-align);">mobile</span><span style="background-color: transparent; text-align: var(--bs-body-text-align);">&nbsp;</span><span style="background-color: transparent; text-align: var(--bs-body-text-align);">number or username in laravel.</span></p><p>Let's get started.</p><p><b>Step 1:</b> Install your laravel application and get your database&nbsp;<span style="background-color: transparent; text-align: var(--bs-body-text-align);">connected</span><span style="background-color: transparent; text-align: var(--bs-body-text-align);">&nbsp;</span><span style="background-color: transparent; text-align: var(--bs-body-text-align);">and migrate the tables.</span></p><p><b>Step 2:</b> Create a migration file as follows</p><div class="alert funda-bg" style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px; white-space: pre;">php artisan make:migration add_phone_to_users_table</div><p><span style="background-color: transparent; text-align: var(--bs-body-text-align);">After successful of creating migration, paste the below code in your last migration file. </span><b style="background-color: transparent; text-align: var(--bs-body-text-align);">(2022_10_30_102257_add_phone_to_users_table.php)</b><br></p><div class="alert funda-bg" style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px; white-space: pre;"><div><span style="color: #569cd6;">    public</span> <span style="color: #569cd6;">function</span> <span style="color: #dcdcaa;">up</span>()</div><div>&nbsp; &nbsp; <span>{</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #4ec9b0;">Schema</span>::<span style="color: #dcdcaa;">table</span>(<span style="color: #ce9178;">'users'</span>, <span style="color: #569cd6;">function</span> (<span style="color: #4ec9b0;">Blueprint</span> <span style="color: #9cdcfe;"><span>$</span>table</span>) <span>{</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #9cdcfe;"><span>$</span>table</span>-&gt;<span style="color: #dcdcaa;">string</span>(<span style="color: #ce9178;">'phone'</span>)-&gt;<span style="color: #dcdcaa;">unique</span>()-&gt;<span style="color: #dcdcaa;">nullable</span>();</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span><span><span><span>}</span></span></span></span>);</div><div>&nbsp; &nbsp; <span><span><span><span>}</span></span></span></span></div><br><div>&nbsp; &nbsp; <span style="color: #6a9955;">/**</span></div><div><span style="color: #6a9955;">&nbsp; &nbsp; &nbsp;* Reverse the migrations.</span></div><div><span style="color: #6a9955;">&nbsp; &nbsp; &nbsp;*</span></div><div><span style="color: #6a9955;">&nbsp; &nbsp; &nbsp;* </span><span style="color: #569cd6;"><span>@</span>return</span><span style="color: #6a9955;"> </span><span style="color: #569cd6;">void</span></div><div><span style="color: #6a9955;">&nbsp; &nbsp; &nbsp;*/</span></div><div>&nbsp; &nbsp; <span style="color: #569cd6;">public</span> <span style="color: #569cd6;">function</span> <span style="color: #dcdcaa;">down</span>()</div><div>&nbsp; &nbsp; <span>{</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #4ec9b0;">Schema</span>::<span style="color: #dcdcaa;">table</span>(<span style="color: #ce9178;">'users'</span>, <span style="color: #569cd6;">function</span> (<span style="color: #4ec9b0;">Blueprint</span> <span style="color: #9cdcfe;"><span>$</span>table</span>) <span>{</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #9cdcfe;"><span>$</span>table</span>-&gt;<span style="color: #dcdcaa;">dropColumn</span>(<span style="color: #ce9178;">'phone'</span>);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span><span><span><span>}</span></span></span></span>);</div><div>&nbsp; &nbsp; <span><span><span><span>}</span></span></span></span></div></div><p><br></p><p><b>Step 3:</b> Go to the <b>login.blade.php</b> file in following path: <b>resources/views/auth/login.blade.php</b>&nbsp;</p><p>In this file, change the <b>&lt;input type="email" /&gt; </b>to&nbsp;<span style="font-weight: bolder; background-color: transparent; text-align: var(--bs-body-text-align);">&lt;input type="text" /&gt;</span><span style="background-color: transparent; text-align: var(--bs-body-text-align);">&nbsp;for the email input field as follows:</span></p><div class="alert funda-bg" style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px; white-space: pre;"><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">input</span> <span style="color: #9cdcfe;">id</span>=<span style="color: #ce9178;">"email"</span> <span style="color: #9cdcfe;">type</span>=<span style="color: #ce9178;">"text"</span> <span style="color: #9cdcfe;">class</span>=<span style="color: #ce9178;">"form-control </span><span style="color: #569cd6;"><span>@</span>error</span><span style="color: #ce9178;">(</span><span style="color: #ce9178;">'email'</span><span style="color: #ce9178;">) is-invalid </span><span style="color: #569cd6;"><span>@</span>enderror</span><span style="color: #ce9178;">"</span> <span style="color: #9cdcfe;">name</span>=<span style="color: #ce9178;">"email"</span> <span style="color: #9cdcfe;">value</span>=<span style="color: #ce9178;">"</span><span style="color: #dcdcaa;"><span>{</span><span>{</span></span><span style="color: #ce9178;"> </span><span style="color: #dcdcaa;">old</span><span style="color: #ce9178;">('email') </span><span style="color: #dcdcaa;"><span><span><span><span>}</span></span></span></span><span><span><span><span>}</span></span></span></span></span><span style="color: #ce9178;">"</span> <span style="color: #9cdcfe;">required</span> <span style="color: #9cdcfe;">autocomplete</span>=<span style="color: #ce9178;">"email"</span> <span style="color: #9cdcfe;">autofocus</span><span style="color: #808080;">&gt;</span></div></div><p><br></p><p><b>Step 4:</b> Go to <b>LoginController.php</b> in the following path: <b>app/http/controllers/auth/LoginController.php</b>&nbsp;</p><p>Paste the below code in your <b>LoginController.php</b> file</p><div class="alert funda-bg" style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px; white-space: pre;"><div><span style="color: #569cd6;">protected</span> <span style="color: #569cd6;">function</span> <span style="color: #dcdcaa;">credentials</span>(<span style="color: #4ec9b0;">Request</span> <span style="color: #9cdcfe;"><span>$</span>request</span>)</div><div><span>{</span></div><div>&nbsp; &nbsp; <span style="color: #c586c0;">if</span>(<span style="color: #dcdcaa;">is_numeric</span>(<span style="color: #9cdcfe;"><span>$</span>request</span>-&gt;<span style="color: #dcdcaa;">get</span>(<span style="color: #ce9178;">'email'</span>)))<span>{</span></div><br><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #c586c0;">return</span> [<span style="color: #ce9178;">'phone'</span>=&gt;<span style="color: #9cdcfe;"><span>$</span>request</span>-&gt;<span style="color: #dcdcaa;">get</span>(<span style="color: #ce9178;">'email'</span>),<span style="color: #ce9178;">'password'</span>=&gt;<span style="color: #9cdcfe;"><span>$</span>request</span>-&gt;<span style="color: #dcdcaa;">get</span>(<span style="color: #ce9178;">'password'</span>)];</div><div>&nbsp; &nbsp; <span><span><span><span>}</span></span></span></span></div><div>&nbsp; &nbsp; <span style="color: #c586c0;">elseif</span> (<span style="color: #dcdcaa;">filter_var</span>(<span style="color: #9cdcfe;"><span>$</span>request</span>-&gt;<span style="color: #dcdcaa;">get</span>(<span style="color: #ce9178;">'email'</span>), FILTER_VALIDATE_EMAIL)) <span>{</span></div><br><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #c586c0;">return</span> [<span style="color: #ce9178;">'email'</span> =&gt; <span style="color: #9cdcfe;"><span>$</span>request</span>-&gt;<span style="color: #dcdcaa;">get</span>(<span style="color: #ce9178;">'email'</span>), <span style="color: #ce9178;">'password'</span>=&gt;<span style="color: #9cdcfe;"><span>$</span>request</span>-&gt;<span style="color: #dcdcaa;">get</span>(<span style="color: #ce9178;">'password'</span>)];</div><div>&nbsp; &nbsp; <span><span><span><span>}</span></span></span></span></div><br><div>&nbsp; &nbsp; <span style="color: #c586c0;">return</span> [<span style="color: #ce9178;">'username'</span> =&gt; <span style="color: #9cdcfe;"><span>$</span>request</span>-&gt;<span style="color: #dcdcaa;">get</span>(<span style="color: #ce9178;">'email'</span>), <span style="color: #ce9178;">'password'</span>=&gt;<span style="color: #9cdcfe;"><span>$</span>request</span>-&gt;<span style="color: #dcdcaa;">get</span>(<span style="color: #ce9178;">'password'</span>)];</div><div><span><span><span><span>}</span></span></span></span></div></div><p><br></p><p>That's it, now you can <b>login with your email id or phone number in laravel</b>.</p>
                        </div>
                        <div class="col-md-12 mt-3">
                            <div class="row">
                                <div class="col-md-6 col-6 text-start">
                                    <a href="{{ url('/laravel-8/get-find-data-by-multiple-ids-in-laravel') }}" class="bg-blue px-5 btn text-white" ><i class="fa fa-arrow-left me-2"></i> Prev </a>
                                </div>
                            </div>
                        </div>

                    </div>
                    @include('category.laravel8.partials.latestPost')
                </div>
            </div>
        </div>
    </div>
@endsection

